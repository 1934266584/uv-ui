"use strict";const r=require("vue"),i=require("../packages/utils/index.js"),b={name:"UvCountTo"},x=Object.assign(b,{props:{start:{type:Number,required:!1,default:0},end:{type:Number,required:!1,default:0},duration:{type:Number,required:!1,default:5e3},autoPlay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:0,validator(n){return n>=0}},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,default(n,u,o,t){return o*(-Math.pow(2,-10*n/t)+1)*1024/1023+u}},fontSize:{type:String},bold:{type:Boolean,default:!1},color:{type:String}},emits:["onMountedcallback","callback"],setup(n,{expose:u,emit:o}){const t=n,y=a=>!isNaN(parseFloat(a)),c=a=>{a=a.toFixed(t.default),a+="";const l=a.split(".");let s=l[0];const q=l.length>1?t.decimal+l[1]:"",m=/(\d+)(\d{3})/;if(t.separator&&!y(t.separator))for(;m.test(s);)s=s.replace(m,"$1"+t.separator+"$2");return t.prefix+s+q+t.suffix},e=r.reactive({localStart:t.start,displayValue:c(t.start),printVal:null,paused:!1,localDuration:t.duration,startTime:null,timestamp:null,remaining:null,rAF:null}),d=r.computed(()=>t.start>t.end),p=()=>{e.localStart=t.start,e.startTime=null,e.localDuration=t.duration,e.paused=!1,e.rAF=i.requestAnimationFrame(f)};r.watch(()=>t.start,()=>{t.autoPlay&&p()}),r.watch(()=>t.end,()=>{t.autoPlay&&p()}),r.onMounted(()=>{t.autoPlay&&p(),o("onMountedcallback")});const S=()=>{i.cancelAnimationFrame(e.rAF)},g=()=>{e.startTime=null,e.localDuration=+e.remaining,e.localStart=+e.printVal,i.requestAnimationFrame(f)},F=()=>{e.paused?(g(),e.paused=!1):(S(),e.paused=!0)},V=()=>{e.startTime=null,i.cancelAnimationFrame(e.rAF),e.displayValue=c(t.start)},f=a=>{e.startTime||(e.startTime=a),e.timestamp=a;const l=a-e.startTime;e.remaining=e.localDuration-l,t.useEasing?d.value?e.printVal=e.localStart-t.easingFn(l,0,e.localStart-t.end,e.localDuration):e.printVal=t.easingFn(l,e.localStart,t.end-e.localStart,e.localDuration):d.value?e.printVal=e.localStart-(e.localStart-t.end)*(l/e.localDuration):e.printVal=e.localStart+(t.end-e.localStart)*(l/e.localDuration),d.value?e.printVal=e.printVal<t.end?t.end:e.printVal:e.printVal=e.printVal>t.end?t.end:e.printVal,e.displayValue=c(e.printVal),l<e.localDuration?e.rAF=i.requestAnimationFrame(f):o("callback")};return r.onUnmounted(()=>{i.cancelAnimationFrame(e.rAF)}),u({pauseResume:F,reset:V}),(a,l)=>(r.openBlock(),r.createElementBlock("span",{class:"uv-count-to",style:r.normalizeStyle({fontSize:n.fontSize,fontWeight:n.bold?"700":"500",color:n.color})},r.toDisplayString(e.displayValue),5))}});module.exports=x;

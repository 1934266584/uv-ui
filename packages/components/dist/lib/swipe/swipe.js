"use strict";const t=require("vue"),x=require("../packages/hooks/useContext.js"),_=require("../packages/hooks/useTouch.js");require("./swipe.vue_vue_type_style_index_0_lang.js");const g={name:"UvSwipe"},y=Object.assign(g,{props:{autoplay:{type:[Number,String]},initialSwipe:{type:[Number,String],default:0},loop:{type:Boolean,default:!0}},setup(v){const d=v,e=t.reactive({duration:0,activeIndex:0,width:0,moving:!1}),l=t.ref(null),f=t.ref(null),{childrenNum:a,fields:o}=x.useChildren("swipe",{props:d});t.onMounted(()=>{e.width=l.value.offsetWidth});const r=t.computed(()=>a.value*e.width),u=_.useTouch(),i=t.ref(0);let c=null;function h(n){e.duration=.3,u.start(n),c=i.value}function p(n){u.move(n);const{deltaX:s}=u;e.moving||(s.value<0&&e.activeIndex===a.value-1?o[0].transform=r.value:s.value>0&&e.activeIndex===0&&(o[o.length-1].transform=-r.value)),e.moving=!0,i.value=c+s.value}function m(n){e.moving=!1;const{deltaX:s}=u;-s.value>e.width/8?e.activeIndex++:s.value>e.width/8&&e.activeIndex--,i.value=-e.width*e.activeIndex}function w(){e.activeIndex<0?(e.duration=0,i.value=-e.width*(a.value-1),o[o.length-1].transform=0,e.activeIndex=a.value-1):e.activeIndex>a.value-1?(e.duration=0,e.activeIndex=0,i.value=0,o[0].transform=0):o.forEach(n=>{n.transform=0})}return(n,s)=>(t.openBlock(),t.createElementBlock("div",{class:"uv-swipe",ref_key:"swiperRef",ref:l},[t.createElementVNode("div",{onTouchstart:h,onTouchmove:p,onTouchend:m,onTransitionend:w,ref_key:"swipeListRef",ref:f,class:"uv-swipe-list",style:t.normalizeStyle({width:`${t.unref(r)}px`,transform:`translateX(${i.value}px)`,transitionDuration:e.duration+"s"})},[t.renderSlot(n.$slots,"default")],36)],512))}});module.exports=y;
